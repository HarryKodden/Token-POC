<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="947px" preserveAspectRatio="none" style="width:994px;height:947px;background:#FFFFFF;" version="1.1" viewBox="0 0 994 947" width="994px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="26.4883" id="_title" style="stroke:none;stroke-width:1.0;" width="275" x="361" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="265" x="366" y="28.5352">ResearchCloud Provisioning Services</text><rect fill="none" height="134.5527" style="stroke:#000000;stroke-width:1.5;" width="737.5" x="10" y="135.9766"/><rect fill="none" height="400.3477" style="stroke:#000000;stroke-width:1.5;" width="747.5" x="10" y="284.5293"/><rect fill="none" height="75.9316" style="stroke:#000000;stroke-width:1.5;" width="591" x="156.5" y="601.9453"/><rect fill="none" height="46.6211" style="stroke:#000000;stroke-width:1.5;" width="831.5" x="156.5" y="698.877"/><rect fill="none" height="89.9316" style="stroke:#000000;stroke-width:1.5;" width="978" x="10" y="759.498"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="38" x2="38" y1="118.9766" y2="866.4297"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="224.5" x2="224.5" y1="118.9766" y2="866.4297"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="710.5" x2="710.5" y1="118.9766" y2="866.4297"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="958" x2="958" y1="118.9766" y2="866.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="20" y="116.0234">user</text><ellipse cx="38" cy="50.9883" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M38,58.9883 L38,85.9883 M25,66.9883 L51,66.9883 M38,85.9883 L25,100.9883 M38,85.9883 L51,100.9883 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="20" y="878.9648">user</text><ellipse cx="38" cy="890.418" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M38,898.418 L38,925.418 M25,906.418 L51,906.418 M38,925.418 L25,940.418 M38,925.418 L51,940.418 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117" x="166.5" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="173.5" y="108.0234">ResearchCloud</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117" x="166.5" y="865.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="173.5" y="885.9648">ResearchCloud</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53" x="684.5" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="691.5" y="108.0234">SRAM</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53" x="684.5" y="865.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="691.5" y="885.9648">SRAM</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="40" x="938" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26" x="945" y="108.0234">XYZ</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="40" x="938" y="865.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26" x="945" y="885.9648">XYZ</text><path d="M10,135.9766 L247,135.9766 L247,143.2871 L237,153.2871 L10,153.2871 L10,135.9766 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="134.5527" style="stroke:#000000;stroke-width:1.5;" width="737.5" x="10" y="135.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="192" x="25" y="149.5449">Authenticate ResearchCloud</text><polygon fill="#181818" points="213,170.5977,223,174.5977,213,178.5977,217,174.5977" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="38" x2="219" y1="174.5977" y2="174.5977"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163" x="45" y="169.8555">Logon to "ResearchCloud"</text><polygon fill="#181818" points="49,199.9082,39,203.9082,49,207.9082,45,203.9082" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="43" x2="224" y1="203.9082" y2="203.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="55" y="199.166">Redirect to SRAM</text><polygon fill="#181818" points="699,229.2188,709,233.2188,699,237.2188,703,233.2188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="38" x2="705" y1="233.2188" y2="233.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="45" y="228.4766">Authenticate</text><polygon fill="#181818" points="236,258.5293,226,262.5293,236,266.5293,232,262.5293" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="230" x2="710" y1="262.5293" y2="262.5293"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="242" y="257.7871">Access Token (SRC)</text><path d="M10,284.5293 L304,284.5293 L304,291.8398 L294,301.8398 L10,301.8398 L10,284.5293 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="400.3477" style="stroke:#000000;stroke-width:1.5;" width="747.5" x="10" y="284.5293"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="249" x="25" y="298.0977">Obtain Refresh token for Service XYZ</text><polygon fill="#181818" points="213,319.1504,223,323.1504,213,327.1504,217,323.1504" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="38" x2="219" y1="323.1504" y2="323.1504"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="45" y="318.4082">connect to XYZ</text><polygon fill="#181818" points="699,348.4609,709,352.4609,699,356.4609,703,352.4609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="225" x2="705" y1="352.4609" y2="352.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="462" x="232" y="347.7188">/oidc/device_authorization client_id=XYZ, scope=openid+offline_access</text><polygon fill="#181818" points="236,377.7715,226,381.7715,236,385.7715,232,381.7715" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="230" x2="710" y1="381.7715" y2="381.7715"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="273" x="242" y="377.0293">device_code="xxx", verification=https://...</text><polygon fill="#181818" points="699,407.082,709,411.082,699,415.082,703,411.082" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="225" x2="705" y1="411.082" y2="411.082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202" x="232" y="406.3398">/oidc/token device_code="xxx"</text><polygon fill="#181818" points="236,436.3926,226,440.3926,236,444.3926,232,440.3926" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="230" x2="710" y1="440.3926" y2="440.3926"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63" x="242" y="435.6504">pending...</text><polygon fill="#181818" points="699,465.7031,709,469.7031,699,473.7031,703,469.7031" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="38" x2="705" y1="469.7031" y2="469.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="45" y="464.9609">using verification link</text><polygon fill="#181818" points="49,495.0137,39,499.0137,49,503.0137,45,499.0137" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="43" x2="710" y1="499.0137" y2="499.0137"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="55" y="494.2715">Authenticate + Consent</text><polygon fill="#181818" points="699,524.3242,709,528.3242,699,532.3242,703,528.3242" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="38" x2="705" y1="528.3242" y2="528.3242"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="45" y="523.582">Accepted !</text><polygon fill="#181818" points="699,553.6348,709,557.6348,699,561.6348,703,557.6348" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="225" x2="705" y1="557.6348" y2="557.6348"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="370" x="232" y="552.8926">/oidc/token grant_type=device_token, device_code="xxx"</text><polygon fill="#181818" points="236,582.9453,226,586.9453,236,590.9453,232,586.9453" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="230" x2="710" y1="586.9453" y2="586.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="256" x="242" y="582.2031">access_token="aaa", refresh_token="rrr"</text><path d="M156.5,601.9453 L283.5,601.9453 L283.5,609.2559 L273.5,619.2559 L156.5,619.2559 L156.5,601.9453 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="75.9316" style="stroke:#000000;stroke-width:1.5;" width="591" x="156.5" y="601.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="82" x="171.5" y="615.5137">repeatable...</text><polygon fill="#181818" points="699,636.5664,709,640.5664,699,644.5664,703,640.5664" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="225" x2="705" y1="640.5664" y2="640.5664"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="375" x="232" y="635.8242">/oidc/token grant_type=refresh_token, refresh_token="rrr"</text><polygon fill="#181818" points="236,665.877,226,669.877,236,673.877,232,669.877" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="230" x2="710" y1="669.877" y2="669.877"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="256" x="242" y="665.1348">access_token="aaa", refresh_token="rrr"</text><path d="M156.5,698.877 L519.5,698.877 L519.5,706.1875 L509.5,716.1875 L156.5,716.1875 L156.5,698.877 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="46.6211" style="stroke:#000000;stroke-width:1.5;" width="831.5" x="156.5" y="698.877"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="318" x="171.5" y="712.4453">Provision/Refresh workspace connected to XYZ</text><polygon fill="#181818" points="946,733.498,956,737.498,946,741.498,950,737.498" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="225" x2="952" y1="737.498" y2="737.498"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219" x="232" y="732.7559">Provision, pass access_token "aaa"</text><path d="M10,759.498 L81,759.498 L81,766.8086 L71,776.8086 L10,776.8086 L10,759.498 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="89.9316" style="stroke:#000000;stroke-width:1.5;" width="978" x="10" y="759.498"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="26" x="25" y="773.0664">XYZ</text><polygon fill="#181818" points="946,778.8086,956,782.8086,946,786.8086,950,782.8086" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="38" x2="952" y1="782.8086" y2="782.8086"/><polygon fill="#181818" points="722,808.1191,712,812.1191,722,816.1191,718,812.1191" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="716" x2="957" y1="812.1191" y2="812.1191"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="223" x="728" y="807.377">/oidc/userinfo access_token="aaa"</text><polygon fill="#181818" points="946,837.4297,956,841.4297,946,845.4297,950,841.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="711" x2="952" y1="841.4297" y2="841.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="718" y="836.6875">user details</text><!--MD5=[eda2e0dfbe00b0f0838a1d08b95be11c]
@startuml assets/ResearchCloud

title "ResearchCloud Provisioning Services"

actor user
participant SRC as "ResearchCloud"
participant SRAM

group Authenticate ResearchCloud
user -> SRC: Logon to "ResearchCloud"
user <- - SRC: Redirect to SRAM
user -> SRAM: Authenticate
SRC <- - SRAM: Access Token (SRC)
end

group Obtain Refresh token for Service XYZ
user -> SRC: connect to XYZ
SRC -> SRAM: /oidc/device_authorization client_id=XYZ, scope=openid+offline_access
SRC <- - SRAM: device_code="xxx", verification=https://...
SRC -> SRAM: /oidc/token device_code="xxx"
SRC <- - SRAM: pending...
user -> SRAM: using verification link
user <- SRAM: Authenticate + Consent
user -> SRAM: Accepted !
SRC - -> SRAM: /oidc/token grant_type=device_token, device_code="xxx"

SRC <- - SRAM: access_token="aaa", refresh_token="rrr"
group repeatable...
SRC - -> SRAM: /oidc/token grant_type=refresh_token, refresh_token="rrr"
SRC <- - SRAM: access_token="aaa", refresh_token="rrr"
end
end

group Provision/Refresh workspace connected to XYZ
SRC -> XYZ: Provision, pass access_token "aaa"
end

group XYZ
user -> XYZ
XYZ -> SRAM: /oidc/userinfo access_token="aaa"
XYZ <- - SRAM: user details
end

@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: NL
--></g></svg>