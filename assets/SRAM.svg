<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="739px" preserveAspectRatio="none" style="width:1220px;height:739px;background:#FFFFFF;" version="1.1" viewBox="0 0 1220 739" width="1220px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="26.4883" id="_title" style="stroke:none;stroke-width:1.0;" width="168" x="527.5" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="158" x="532.5" y="28.5352">SRAM Personal Token</text><rect fill="none" height="237.7949" style="stroke:#000000;stroke-width:1.5;" width="465.5" x="10" y="135.9766"/><rect fill="none" height="253.416" style="stroke:#000000;stroke-width:1.5;" width="1204" x="10" y="387.7715"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="38" x2="38" y1="118.9766" y2="658.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="438.5" x2="438.5" y1="118.9766" y2="658.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="824" x2="824" y1="118.9766" y2="658.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="20" y="116.0234">user</text><ellipse cx="38" cy="50.9883" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M38,58.9883 L38,85.9883 M25,66.9883 L51,66.9883 M38,85.9883 L25,100.9883 M38,85.9883 L51,100.9883 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="20" y="670.7227">user</text><ellipse cx="38" cy="682.1758" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M38,690.1758 L38,717.1758 M25,698.1758 L51,698.1758 M38,717.1758 L25,732.1758 M38,717.1758 L51,732.1758 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53" x="412.5" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="419.5" y="108.0234">SRAM</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53" x="412.5" y="657.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="419.5" y="677.7227">SRAM</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="40" x="804" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26" x="811" y="108.0234">XYZ</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="40" x="804" y="657.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26" x="811" y="677.7227">XYZ</text><path d="M10,135.9766 L415,135.9766 L415,143.2871 L405,153.2871 L10,153.2871 L10,135.9766 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="237.7949" style="stroke:#000000;stroke-width:1.5;" width="465.5" x="10" y="135.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="360" x="25" y="149.5449">Create Personal Token for a targeted Service in SRAM</text><polygon fill="#181818" points="427,170.5977,437,174.5977,427,178.5977,431,174.5977" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="38" x2="433" y1="174.5977" y2="174.5977"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="45" y="169.8555">Logon to "SRAM"</text><polygon fill="#181818" points="427,199.9082,437,203.9082,427,207.9082,431,203.9082" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="38" x2="433" y1="203.9082" y2="203.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="45" y="199.166">Authenticate</text><polygon fill="#181818" points="49,229.2188,39,233.2188,49,237.2188,45,233.2188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="43" x2="438" y1="233.2188" y2="233.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="55" y="228.4766">Authenticated !</text><polygon fill="#181818" points="427,258.5293,437,262.5293,427,266.5293,431,262.5293" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="38" x2="433" y1="262.5293" y2="262.5293"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60" x="45" y="257.7871">Select CO</text><polygon fill="#181818" points="49,287.8398,39,291.8398,49,295.8398,45,291.8398" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="43" x2="438" y1="291.8398" y2="291.8398"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="55" y="287.0977">CO is presented</text><polygon fill="#181818" points="427,317.1504,437,321.1504,427,325.1504,431,321.1504" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="38" x2="433" y1="321.1504" y2="321.1504"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="255" x="45" y="316.4082">Select Tokens / Create Token for service</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="26" x="304" y="316.4082">XYZ</text><polygon fill="#181818" points="49,361.7715,39,365.7715,49,369.7715,45,365.7715" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="43" x2="438" y1="365.7715" y2="365.7715"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191" x="55" y="345.7188">Token is one-time-presented,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="377" x="55" y="361.0293">User should copy/save that token, sram stores a hash value</text><path d="M10,387.7715 L299,387.7715 L299,395.082 L289,405.082 L10,405.082 L10,387.7715 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="253.416" style="stroke:#000000;stroke-width:1.5;" width="1204" x="10" y="387.7715"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="214" x="25" y="401.3398">Use a Personal Token in Service</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="26" x="243" y="401.3398">XYZ</text><polygon fill="#181818" points="812,468.3242,822,472.3242,812,476.3242,816,472.3242" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="38" x2="818" y1="472.3242" y2="472.3242"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="45" y="421.6504">User connects to Service XYZ</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="45" y="436.9609">Credentials</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="45" y="452.2715">- Username: SRAM UID</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212" x="45" y="467.582">- Password: Personal Token value</text><polygon fill="#181818" points="450,528.2559,440,532.2559,450,536.2559,446,532.2559" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="444" x2="823" y1="532.2559" y2="532.2559"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="320" x="456" y="496.8926">POST "https://sram.surf.nl/api/tokens/introspect"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="456" y="512.2031">bearer: XYZ-Secret</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="291" x="456" y="527.5137">payload: { "token": "&lt;Personal Token Value&gt;" }</text><polygon fill="#181818" points="812,557.5664,822,561.5664,812,565.5664,816,561.5664" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="439" x2="818" y1="561.5664" y2="561.5664"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="446" y="556.8242">200 OK + User Details</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="782" x2="824" y1="590.877" y2="590.877"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="782" x2="782" y1="590.877" y2="603.877"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="782" x2="823" y1="603.877" y2="603.877"/><polygon fill="#181818" points="815,599.877,825,603.877,815,607.877,819,603.877" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="371" x="453" y="586.1348">Verify that User Details / Username == provided Username</text><polygon fill="#181818" points="49,629.1875,39,633.1875,49,637.1875,45,633.1875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="43" x2="823" y1="633.1875" y2="633.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="55" y="628.4453">Access is granted</text><!--MD5=[5f1114dbaeff1e6a54a85481e4cfa932]
@startuml assets/SRAM

title "SRAM Personal Token"

actor user
participant SRAM

group Create Personal Token for a targeted Service in SRAM
user -> SRAM: Logon to "SRAM"
user -> SRAM: Authenticate
user <- SRAM: Authenticated !
user -> SRAM: Select CO
user <- SRAM: CO is presented
user -> SRAM: Select Tokens / Create Token for service **XYZ**
user <- - SRAM: Token is one-time-presented, \nUser should copy/save that token, sram stores a hash value
end

group Use a Personal Token in Service **XYZ**
user -> XYZ: User connects to Service XYZ\nCredentials\n- Username: SRAM UID\n- Password: Personal Token value
XYZ -> SRAM: POST "https://sram.surf.nl/api/tokens/introspect"\nbearer: XYZ-Secret\npayload: { "token": "<Personal Token Value>" }
XYZ <- - SRAM: 200 OK + User Details
XYZ <- - XYZ: Verify that User Details / Username == provided Username
user <- - XYZ: Access is granted
end

@enduml

PlantUML version 1.2022.12(Sun Oct 23 20:12:26 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: NL
--></g></svg>